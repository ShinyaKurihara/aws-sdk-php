<?php
/*
 * Smarty plugin
 * -------------------------------------------------------------
 * File:     function.get_customer_form_select_map.php
 * Type:     function
 * Name:     get_customer_form_select_map
 * Purpose:  都道府県選択地図を表示
 * -------------------------------------------------------------
 */


function smarty_function_get_customer_form_select_map($params){
	global $estimate_pref_list, $pref_list;

	$pref_coords = array(
		1 => "502,19,481,143,520,141,525,119,641,120,658,21,504,18",
		2 => "476,161,470,186,594,187,599,156,478,156",
		5 => "472,188,465,228,524,230,530,189,473,189",
		3 => "533,187,525,230,584,229,593,189,533,188",
		6 => "462,232,458,261,486,261,482,278,513,278,523,233,464,232",
		4 => "525,232,516,278,578,278,585,232",
		15 => "430,279,422,319,469,320,482,266,457,265,454,281,430,278",
		7 => "480,281,471,321,568,322,578,280,481,279",
		16 => "386,285,381,321,418,321,426,278,389,278",
		8 => "533,324,525,383,558,384,569,322,535,322",
		9 => "491,323,483,367,524,369,533,323,495,323,454,323",
		10 => "448,324,441,369,480,368,487,324,447,323,416,322",
		20 => "411,324,389,443,412,443,419,406,430,408,448,324,409,325",
		11 => "439,374,432,409,515,408,522,371,441,370",
		12 => "522,387,507,490,541,489,557,386,522,387",
		13 => "460,411,452,444,491,447,493,435,511,437,515,411,460,411",
		19 => "417,416,413,444,449,445,459,412,417,412",
		14 => "434,452,430,472,442,471,447,476,485,476,491,450,434,449",
		22 => "401,446,393,492,444,493,444,474,426,471,431,448,401,447",
		17 => "364,252,350,320,378,321,389,253,364,254",
		21 => "379,324,358,444,387,443,409,324,377,324",
		23 => "356,447,350,491,390,492,397,448,356,447",
		18 => "321,348,316,370,367,370,377,324,352,325,349,342,327,342",
		25 => "343,372,336,408,360,410,366,373,343,372",
		24 => "338,412,321,516,343,519,360,411,338,411",
		26 => "295,344,285,408,332,410,341,372,314,371,321,343,295,344",
		29 => "312,412,298,488,321,491,337,411,309,412",
		27 => "283,411,275,469,297,471,307,412,283,411",
		30 => "276,473,267,517,319,517,322,493,293,492,297,473,276,473",
		28 => "264,346,250,434,276,436,292,344,264,344",
		31 => "232,345,226,383,255,383,259,345,231,345,231,362",
		33 => "225,388,218,433,246,435,255,387,225,387",
		32 => "200,348,195,384,223,385,228,344,201,344",
		34 => "193,388,187,434,213,435,221,389,193,387",
		35 => "172,344,157,434,184,433,199,345,170,344",
		37 => "209,449,202,479,258,482,265,450,209,449",
		38 => "152,453,146,481,200,481,208,449,152,450",
		36 => "204,491,198,516,252,516,258,484,203,483",
		39 => "145,494,142,514,198,516,203,483,146,485",
		40 => "88,343,83,384,146,384,154,342,87,343",
		44 => "111,389,105,427,138,426,146,387,110,387",
		45 => "105,430,98,467,131,467,138,429,106,430",
		43 => "82,387,108,385,93,466,67,467,81,387",
		46 => "66,472,58,516,125,517,134,472,65,472",
		41 => "67,342,55,396,77,395,87,341,67,341",
		42 => "45,340,36,397,57,395,63,342,45,342",
		47 => "24,465,16,515,41,516,52,468,25,470",
	);



	$str = "";

	foreach($pref_list as $pref_num => $pref_name){
		echo '<area shape="poly" coords="';
		echo $pref_coords[$pref_num];
		echo '" href="#'.$pref_num.'" region="'.$pref_num.'" ';
		echo 'class="'.(in_array($pref_num, $estimate_pref_list) ? 'on' : 'off' ).'" title="'.$pref_list[$pref_num].'">';
		echo "\n";
	}

	return $str;

}
?>